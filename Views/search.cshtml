@using Azure.Core
@using Umbraco.Cms.Web.Common.PublishedModels;
@using umbraco_assignment.Models.PublishedModels
@using umbraco_assignment.Models.ViewModels

@inherits UmbracoViewPage<SearchPageViewModel>

@{
    Layout = "root.cshtml";
}

<div class="container mt-4">
    @using (Html.BeginUmbracoForm("SearchRestaurants", "SearchSurface", FormMethod.Post, new { @class = "search-form mx-auto" }))
    {
        <div class="input-group search-box">
            <input class="form-control search-input" id="searchQuery" name="query" type="search" placeholder="@(Umbraco.GetDictionaryValue("SearchBarPlaceholder"))" aria-label="Search">
            <button class="input-group-text search-button" type="submit" disabled>
                <i class="fas fa-search"></i> <!-- Magnifying glass icon -->
            </button>
        </div>
    }
</div>


<div class="text-center my-4">
    <h1 class="search-title">@Model.Content.Title @if (!string.IsNullOrEmpty(Model.SearchQuery))
        {
            <span class="query-text">"@Model.SearchQuery"</span>
        }</h1>
    <hr class="search-hr"> <!-- Horizontal line for separation -->
</div>

<!-- Search Results Section -->
<section class="container mt-5">
    @if (Model.SearchHits.Any())
    {
        <div class="row justify-content-center">
            @foreach (var restaurant in Model.SearchHits)
            {
                                <a href="@restaurant.Url()" class="search-result-card d-flex mb-4">
                    <!-- Front Image -->
                    <div class="result-image flex-shrink-0 me-3">
                        <img src="@restaurant.FrontImage?.Url()" alt="@restaurant.RestaurantName" class="img-fluid rounded">
                    </div>
@*                 <div class="search-result d-flex mb-4">
                    <!-- Front Image to the Left -->
                    <div class="result-image flex-shrink-0 me-3">
                        <a href="@restaurant.Url()">
                            <img src="@restaurant.FrontImage?.Url()" alt="@restaurant.RestaurantName" class="img-fluid rounded" style="max-width: 150px;">
                        </a>
                    </div> *@

                    <!-- Restaurant Details to the Right -->
                    <div class="result-details">
                        <h5 class="search-restaurant-name fw-bold mb-1">@Html.Raw(restaurant.RestaurantName)</h5>
                        <p class="search-restaurant-description mb-0">@Html.Raw(restaurant.Description)</p>
                    </div>
@*                 </div>

            *@
                </a>
            }
        </div>
    }
    else
    {
        <div class="alert alert-warning text-center" role="alert">
            @Model.NoResultsMessage
        </div>
    }
</section>